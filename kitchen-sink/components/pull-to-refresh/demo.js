webpackJsonp([18],{1130:function(n,s,a){n.exports={content:[],meta:{order:1,title:{"zh-CN":"ListView \u4e0b\u62c9\u5237\u65b0","en-US":"ListView PullToRefresh"},filename:"components/pull-to-refresh/demo/basic-listview.md",id:"components-pull-to-refresh-demo-basic-listview"},highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token comment" spellcheck="true">/* eslint no-dupe-keys: 0, no-mixed-operators: 0 */</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> PullToRefresh<span class="token punctuation">,</span> ListView<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd-mobile\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'Meet hotel\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'McDonald\\\'s invites you\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'Eat the week\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> NUM_ROWS <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> pageIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">genData</span><span class="token punctuation">(</span>pIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ROWS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dataArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`row - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>pIndex <span class="token operator">*</span> NUM_ROWS<span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dataArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListView<span class="token punctuation">.</span>DataSource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      rowHasChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>row1<span class="token punctuation">,</span> row2<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> row1 <span class="token operator">!==</span> row2<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      dataSource<span class="token punctuation">,</span>\n      refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>\n      useBodyScroll<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment" spellcheck="true">// If you use redux, the data maybe at props, you need use `componentWillReceiveProps`</span>\n  <span class="token comment" spellcheck="true">// componentWillReceiveProps(nextProps) {</span>\n  <span class="token comment" spellcheck="true">//   if (nextProps.dataSource !== this.props.dataSource) {</span>\n  <span class="token comment" spellcheck="true">//     this.setState({</span>\n  <span class="token comment" spellcheck="true">//       dataSource: this.state.dataSource.cloneWithRows(nextProps.dataSource),</span>\n  <span class="token comment" spellcheck="true">//     });</span>\n  <span class="token comment" spellcheck="true">//   }</span>\n  <span class="token comment" spellcheck="true">// }</span>\n\n  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'auto\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'hidden\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> hei <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height <span class="token operator">-</span> ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lv<span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>\n\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        height<span class="token punctuation">:</span> hei<span class="token punctuation">,</span>\n        refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  onRefresh <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment" spellcheck="true">// simulate initial Ajax</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  onEndReached <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment" spellcheck="true">// load new data</span>\n    <span class="token comment" spellcheck="true">// hasMore: from backend data, indicates whether it is the last page, here is false</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasMore<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'reach end\'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">genData</span><span class="token punctuation">(</span><span class="token operator">++</span>pageIndex<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> separator <span class="token operator">=</span> <span class="token punctuation">(</span>sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sectionID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rowID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#F5F5F9\'</span><span class="token punctuation">,</span>\n          height<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>\n          borderTop<span class="token punctuation">:</span> <span class="token string">\'1px solid #ECECED\'</span><span class="token punctuation">,</span>\n          borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ECECED\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">/></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> index <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> row <span class="token operator">=</span> <span class="token punctuation">(</span>rowData<span class="token punctuation">,</span> sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        index <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">const</span> obj <span class="token operator">=</span> data<span class="token punctuation">[</span>index<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>rowID<span class="token punctuation">}</span></span>\n          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n            padding<span class="token punctuation">:</span> <span class="token string">\'0 15px\'</span><span class="token punctuation">,</span>\n            backgroundColor<span class="token punctuation">:</span> <span class="token string">\'white\'</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">\'50px\'</span><span class="token punctuation">,</span> lineHeight<span class="token punctuation">:</span> <span class="token string">\'50px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#888\'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'18px\'</span><span class="token punctuation">,</span> borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ddd\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token punctuation">{</span>obj<span class="token punctuation">.</span>title<span class="token punctuation">}</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">\'-webkit-box\'</span><span class="token punctuation">,</span> display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span> padding<span class="token punctuation">:</span> <span class="token string">\'15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">\'63px\'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">\'63px\'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">\'15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">.</span>img<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">\'inline-block\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token punctuation">:</span> <span class="token string">\'8px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#000\'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'16px\'</span><span class="token punctuation">,</span> overflow<span class="token punctuation">:</span> <span class="token string">\'hidden\'</span><span class="token punctuation">,</span> textOverflow<span class="token punctuation">:</span> <span class="token string">\'ellipsis\'</span><span class="token punctuation">,</span> whiteSpace<span class="token punctuation">:</span> <span class="token string">\'nowrap\'</span><span class="token punctuation">,</span> maxWidth<span class="token punctuation">:</span> <span class="token string">\'250px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>obj<span class="token punctuation">.</span>des<span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{</span>rowData<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'16px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'30px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#FF6E27\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>rowID<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> \u5143<span class="token operator">/</span>\u4efb\u52a1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> margin<span class="token punctuation">:</span> <span class="token string">\'30px 15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">inline</span>\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> useBodyScroll<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">></span></span>\n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token operator">?</span> <span class="token string">\'useBodyScroll\'</span> <span class="token punctuation">:</span> <span class="token string">\'partial scroll\'</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>\n        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token operator">?</span> <span class="token string">\'0\'</span> <span class="token punctuation">:</span> <span class="token string">\'1\'</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>el <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>lv <span class="token operator">=</span> el<span class="token punctuation">}</span></span>\n        <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">}</span></span>\n        <span class="token attr-name">renderHeader</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Pull to refresh<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">renderFooter</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div style<span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> padding<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> textAlign<span class="token punctuation">:</span> <span class="token string">\'center\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading <span class="token operator">?</span> <span class="token string">\'Loading...\'</span> <span class="token punctuation">:</span> <span class="token string">\'Loaded\'</span><span class="token punctuation">}</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n        renderRow<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">}</span>\n        renderSeparator<span class="token operator">=</span><span class="token punctuation">{</span>separator<span class="token punctuation">}</span>\n        useBodyScroll<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll<span class="token punctuation">}</span>\n        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n          border<span class="token punctuation">:</span> <span class="token string">\'1px solid #ddd\'</span><span class="token punctuation">,</span>\n          margin<span class="token punctuation">:</span> <span class="token string">\'5px 0\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span>\n        pullToRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PullToRefresh</span>\n          <span class="token attr-name">refreshing</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>refreshing<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onRefresh</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onRefresh<span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span><span class="token punctuation">}</span>\n        onEndReached<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onEndReached<span class="token punctuation">}</span>\n        pageSize<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span>\n      <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>'}],preview:function(){function n(n){return n&&n.__esModule?n:{default:n}}function s(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function t(n){if(Array.isArray(n)){for(var s=0,a=Array(n.length);s<n.length;s++)a[s]=n[s];return a}return Array.from(n)}function e(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function o(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function p(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}function c(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=[],a=0;a<y;a++)s.push("row - "+(n*y+a));return s}var i=a(0),u=a(0),l=(a(998),a(999)),r=n(l),k=(a(237),a(238)),d=n(k),h=(a(870),a(871)),f=n(h),g=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),m=[{img:"https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png",title:"Meet hotel",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"},{img:"https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png",title:"McDonald's invites you",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"},{img:"https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png",title:"Eat the week",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"}],y=20,v=0,w=function(n){function a(n){e(this,a);var s=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));s.onRefresh=function(){s.setState({refreshing:!0,isLoading:!0}),setTimeout(function(){s.rData=c(),s.setState({dataSource:s.state.dataSource.cloneWithRows(s.rData),refreshing:!1,isLoading:!1})},600)},s.onEndReached=function(n){s.state.isLoading&&!s.state.hasMore||(console.log("reach end",n),s.setState({isLoading:!0}),setTimeout(function(){s.rData=[].concat(t(s.rData),t(c(++v))),s.setState({dataSource:s.state.dataSource.cloneWithRows(s.rData),isLoading:!1})},1e3))};var p=new f.default.DataSource({rowHasChanged:function(n,s){return n!==s}});return s.state={dataSource:p,refreshing:!0,isLoading:!0,height:document.documentElement.clientHeight,useBodyScroll:!1},s}return p(a,n),g(a,[{key:"componentDidUpdate",value:function(){this.state.useBodyScroll?document.body.style.overflow="auto":document.body.style.overflow="hidden"}},{key:"componentDidMount",value:function(){var n=this,s=this.state.height-u.findDOMNode(this.lv).offsetTop;setTimeout(function(){n.rData=c(),n.setState({dataSource:n.state.dataSource.cloneWithRows(c()),height:s,refreshing:!1,isLoading:!1})},1500)}},{key:"render",value:function(){var n=this,a=function(n,s){return i.createElement("div",{key:n+"-"+s,style:{backgroundColor:"#F5F5F9",height:8,borderTop:"1px solid #ECECED",borderBottom:"1px solid #ECECED"}})},t=m.length-1,e=function(n,a,e){var o;t<0&&(t=m.length-1);var p=m[t--];return i.createElement("div",{key:e,style:{padding:"0 15px",backgroundColor:"white"}},i.createElement("div",{style:{height:"50px",lineHeight:"50px",color:"#888",fontSize:"18px",borderBottom:"1px solid #ddd"}},p.title),i.createElement("div",{style:(o={display:"-webkit-box"},s(o,"display","flex"),s(o,"padding","15px"),o)},i.createElement("img",{style:{height:"63px",width:"63px",marginRight:"15px"},src:p.img,alt:""}),i.createElement("div",{style:{display:"inline-block"}},i.createElement("div",{style:{marginBottom:"8px",color:"#000",fontSize:"16px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"250px"}},p.des,"-",n),i.createElement("div",{style:{fontSize:"16px"}},i.createElement("span",{style:{fontSize:"30px",color:"#FF6E27"}},e)," \u5143/\u4efb\u52a1"))))};return i.createElement("div",null,i.createElement(d.default,{style:{margin:"30px 15px"},inline:!0,onClick:function(){return n.setState({useBodyScroll:!n.state.useBodyScroll})}},this.state.useBodyScroll?"useBodyScroll":"partial scroll"),i.createElement(f.default,{key:this.state.useBodyScroll?"0":"1",ref:function(s){return n.lv=s},dataSource:this.state.dataSource,renderHeader:function(){return i.createElement("span",null,"Pull to refresh")},renderFooter:function(){return i.createElement("div",{style:{padding:30,textAlign:"center"}},n.state.isLoading?"Loading...":"Loaded")},renderRow:e,renderSeparator:a,useBodyScroll:this.state.useBodyScroll,style:this.state.useBodyScroll?{}:{height:this.state.height,border:"1px solid #ddd",margin:"5px 0"},pullToRefresh:i.createElement(r.default,{refreshing:this.state.refreshing,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:5}))}}]),a}(i.Component);return i.createElement(w,null)}}},1131:function(n,s){},1132:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a(1133);s.default=t.a},1133:function(n,s,a){"use strict";function t(n,s){n.transform=s,n.webkitTransform=s,n.MozTransform=s}var e=a(4),o=a.n(e),p=a(5),c=a.n(p),i=a(12),u=a.n(i),l=a(9),r=a.n(l),k=a(10),d=a.n(k),h=a(0),f=a(6),g=a.n(f),m=this&&this.__rest||function(n,s){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&s.indexOf(t)<0&&(a[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,t=Object.getOwnPropertySymbols(n);e<t.length;e++)s.indexOf(t[e])<0&&(a[t[e]]=n[t[e]]);return a},y=function(n){function s(){return c()(this,s),r()(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return d()(s,n),u()(s,[{key:"shouldComponentUpdate",value:function(n){return n.shouldUpdate}},{key:"render",value:function(){return h.default.createElement("div",null,this.props.render())}}]),s}(h.default.Component),v="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),w="down",S="up",b={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},_=!1;try{var R=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,R)}catch(n){}var C=!!_&&{passive:!1},E=function(n){function s(){c()(this,s);var n=r()(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments));return n.state={currSt:"",dragOnEdge:!1},n.shouldUpdateChildren=!1,n.triggerPullToRefresh=function(){n.state.dragOnEdge||(n.props.refreshing?(n.props.direction===S&&(n._lastScreenY=-n.props.distanceToRefresh-1),n.props.direction===w&&(n._lastScreenY=n.props.distanceToRefresh+1),n.setState({currSt:"release"},function(){return n.setContentStyle(n._lastScreenY)})):n.setState({currSt:"finish"},function(){return n.reset()}))},n.init=function(s){s&&(n._to={touchstart:n.onTouchStart.bind(n,s),touchmove:n.onTouchMove.bind(n,s),touchend:n.onTouchEnd.bind(n,s),touchcancel:n.onTouchEnd.bind(n,s)},Object.keys(n._to).forEach(function(a){s.addEventListener(a,n._to[a],C)}))},n.destroy=function(s){n._to&&s&&Object.keys(n._to).forEach(function(a){s.removeEventListener(a,n._to[a])})},n.onTouchStart=function(s,a){n._ScreenY=n._startScreenY=a.touches[0].screenY,n._lastScreenY=n._lastScreenY||0,a.stopPropagation()},n.isEdge=function(s,a){var t=n.props.getScrollContainer();if(t&&t===document.body){var e=document.scrollingElement?document.scrollingElement:document.body;if(a===S)return e.scrollHeight-e.scrollTop<=window.innerHeight;if(a===w)return e.scrollTop<=0}return a===S?s.scrollHeight-s.scrollTop===s.clientHeight:a===w?s.scrollTop<=0:void 0},n.onTouchMove=function(s,a){var t=a.touches[0].screenY,e=n.props.direction;if(!(e===S&&n._startScreenY<t||e===w&&n._startScreenY>t)&&n.isEdge(s,e)){n.state.dragOnEdge||n.setState({dragOnEdge:!0}),a.preventDefault(),a.stopPropagation();var o=Math.round(t-n._ScreenY);n._ScreenY=t,n._lastScreenY+=o,n.setContentStyle(n._lastScreenY),Math.abs(n._lastScreenY)<n.props.distanceToRefresh?"deactivate"!==n.state.currSt&&n.setState({currSt:"deactivate"}):"deactivate"===n.state.currSt&&n.setState({currSt:"activate"}),v&&a.changedTouches[0].clientY<0&&n.onTouchEnd()}},n.onTouchEnd=function(){n.state.dragOnEdge&&n.setState({dragOnEdge:!1}),"activate"===n.state.currSt?(n.setState({currSt:"release"}),n._timer=setTimeout(function(){n.props.refreshing||n.setState({currSt:"finish"},function(){return n.reset()}),n._timer=void 0},1e3),n.props.onRefresh()):n.reset()},n.reset=function(){n._lastScreenY=0,n.setContentStyle(0)},n.setContentStyle=function(s){n.contentRef&&t(n.contentRef.style,"translate3d(0px,"+s+"px,0)")},n}return d()(s,n),u()(s,[{key:"shouldComponentUpdate",value:function(n){return this.shouldUpdateChildren=this.props.children!==n.children,!0}},{key:"componentDidUpdate",value:function(n){n!==this.props&&n.refreshing!==this.props.refreshing&&this.triggerPullToRefresh()}},{key:"componentDidMount",value:function(){var n=this;setTimeout(function(){n.init(n.props.getScrollContainer()||n.containerRef),n.triggerPullToRefresh()})}},{key:"componentWillUnmount",value:function(){this.destroy(this.props.getScrollContainer()||this.containerRef)}},{key:"render",value:function(){var n=this,s=this.props,a=s.className,t=s.prefixCls,e=s.children,p=s.getScrollContainer,c=s.direction,i=(s.onRefresh,s.refreshing,s.indicator),u=(s.distanceToRefresh,m(s,["className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"])),l=h.default.createElement(y,{shouldUpdate:this.shouldUpdateChildren,render:function(){return e}}),r=function(s){var a=g()(s,!n.state.dragOnEdge&&t+"-transition");return h.default.createElement("div",{className:t+"-content-wrapper"},h.default.createElement("div",{className:a,ref:function(s){return n.contentRef=s}},c===S?l:null,h.default.createElement("div",{className:t+"-indicator"},i[n.state.currSt]||b[n.state.currSt]),c===w?l:null))};return p()?r(t+"-content "+t+"-"+c):h.default.createElement("div",o()({ref:function(s){return n.containerRef=s},className:g()(a,t,t+"-"+c)},u),r(t+"-content"))}}]),s}(h.default.Component);s.a=E,E.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:w,distanceToRefresh:25,indicator:b}},1134:function(n,s,a){n.exports={content:[],meta:{order:0,title:{"zh-CN":"\u62c9\u52a8\u5237\u65b0","en-US":"PullToRefresh"},filename:"components/pull-to-refresh/demo/basic.md",id:"components-pull-to-refresh-demo-basic"},highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token keyword">import</span> <span class="token punctuation">{</span> PullToRefresh<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd-mobile\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dataArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dataArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      down<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>\n      data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> hei <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height <span class="token operator">-</span> ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ptr<span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      height<span class="token punctuation">:</span> hei<span class="token punctuation">,</span>\n      data<span class="token punctuation">:</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token punctuation">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> down<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">></span></span>\n        direction<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'down\'</span> <span class="token punctuation">:</span> <span class="token string">\'up\'</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PullToRefresh</span>\n        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>el <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>ptr <span class="token operator">=</span> el<span class="token punctuation">}</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n          overflow<span class="token punctuation">:</span> <span class="token string">\'auto\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">indicator</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> deactivate<span class="token punctuation">:</span> <span class="token string">\'\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">direction</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'down\'</span> <span class="token punctuation">:</span> <span class="token string">\'up\'</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">refreshing</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>refreshing<span class="token punctuation">}</span></span>\n        <span class="token attr-name">onRefresh</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span></span><span class="token attr-name">,</span> <span class="token attr-name">1000);</span>\n        <span class="token attr-name">}}</span>\n      <span class="token punctuation">></span></span>\n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span> padding<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'pull down\'</span> <span class="token punctuation">:</span> <span class="token string">\'pull up\'</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>i<span class="token punctuation">}</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PullToRefresh</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Demo</span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>'}],preview:function(){function n(n){return n&&n.__esModule?n:{default:n}}function s(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function t(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function e(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}function o(){for(var n=[],s=0;s<20;s++)n.push(s);return n}var p=a(0),c=a(0),i=(a(998),a(999)),u=n(i),l=(a(237),a(238)),r=n(l),k=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),d=function(n){function a(n){s(this,a);var e=t(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return e.state={refreshing:!1,down:!0,height:document.documentElement.clientHeight,data:[]},e}return e(a,n),k(a,[{key:"componentDidMount",value:function(){var n=this,s=this.state.height-c.findDOMNode(this.ptr).offsetTop;setTimeout(function(){return n.setState({height:s,data:o()})},0)}},{key:"render",value:function(){var n=this;return p.createElement("div",null,p.createElement(r.default,{style:{marginBottom:15},onClick:function(){return n.setState({down:!n.state.down})}},"direction: ",this.state.down?"down":"up"),p.createElement(u.default,{ref:function(s){return n.ptr=s},style:{height:this.state.height,overflow:"auto"},indicator:this.state.down?{}:{deactivate:"\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0"},direction:this.state.down?"down":"up",refreshing:this.state.refreshing,onRefresh:function(){n.setState({refreshing:!0}),setTimeout(function(){n.setState({refreshing:!1})},1e3)}},this.state.data.map(function(s){return p.createElement("div",{key:s,style:{textAlign:"center",padding:20}},n.state.down?"pull down":"pull up"," ",s)})))}}]),a}(p.Component);return p.createElement(d,null)}}},714:function(n,s,a){n.exports={"basic-listview":a(1130),basic:a(1134)}},770:function(n,s,a){"use strict";s.__esModule=!0,s.default=function(n,s){var a={};for(var t in n)s.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t]);return a}},870:function(n,s,a){"use strict";a(45),a(231),a(954)},871:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function e(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function o(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function p(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var c=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n},i=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),u=a(0),l=t(u),r=a(903),k=t(r),d=a(906),h=t(d),f=a(959),g=t(f),m=function(n){function s(){e(this,s);var n=o(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments));return n.scrollTo=function(){var s;return(s=n.listviewRef).scrollTo.apply(s,arguments)},n.getInnerViewNode=function(){return n.listviewRef.getInnerViewNode()},n}return p(s,n),i(s,[{key:"render",value:function(){var n=this,s=(0,h.default)(this.props,!1),a=s.restProps,t=s.extraProps;return l.default.createElement(k.default,c({ref:function(s){return n.listviewRef=s}},a,t))}}]),s}(l.default.Component);s.default=m,m.defaultProps={prefixCls:"am-list-view",listPrefixCls:"am-list"},m.DataSource=k.default.DataSource,m.IndexedList=g.default,n.exports=s.default},903:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),a.d(s,"DataSource",function(){return o});var t=a(904),e=a(958);a.d(s,"IndexedList",function(){return e.a}),t.a.IndexedList=e.a;var o=t.a.DataSource;s.default=t.a},904:function(n,s,a){"use strict";var t=a(4),e=a.n(t),o=a(770),p=a.n(o),c=a(5),i=a.n(c),u=a(12),l=a.n(u),r=a(9),k=a.n(r),d=a(10),h=a.n(d),f=a(0),g=a(2),m=a.n(g),y=(a(0),a(955)),v=a(957),w=function(n){function s(){return i()(this,s),k()(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return h()(s,n),l()(s,[{key:"shouldComponentUpdate",value:function(n){return n.shouldUpdate}},{key:"render",value:function(){return this.props.render()}}]),s}(f.default.Component),S=function(n){function s(){var n,a,t,e;i()(this,s);for(var o=arguments.length,p=Array(o),c=0;c<o;c++)p[c]=arguments[c];return a=t=k()(this,(n=s.__proto__||Object.getPrototypeOf(s)).call.apply(n,[this].concat(p))),b.call(t),e=a,k()(t,e)}return h()(s,n),l()(s,[{key:"componentWillMount",value:function(){this.scrollProperties={visibleLength:null,contentLength:null,offset:0},this._childFrames=[],this._visibleRows={},this._prevRenderedRowsCount=0,this._sentEndForContentLength=null}},{key:"componentWillReceiveProps",value:function(n){var s=this;this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||this.setState(function(a,t){return s._prevRenderedRowsCount=0,{curRenderedRowsCount:Math.min(Math.max(a.curRenderedRowsCount,n.initialListSize),n.dataSource.getRowCount())}},function(){return s._renderMoreRowsIfNeeded()})}},{key:"render",value:function(){for(var n=this,s=this.props.dataSource,a=s.rowIdentities,t=[],o=0,c=0;c<a.length;c++){var i=s.sectionIdentities[c],u=a[c];if(0!==u.length){var l=void 0;if(this.props.renderSectionHeader){var r=o>=this._prevRenderedRowsCount&&s.sectionHeaderShouldUpdate(c);l=f.default.createElement(w,{key:"s_"+i,shouldUpdate:!!r,render:this.props.renderSectionHeader.bind(null,s.getSectionHeaderData(c),i)})}for(var k=[],d=0;d<u.length;d++){var h=u[d],g=i+"_"+h,m=o>=this._prevRenderedRowsCount&&s.rowShouldUpdate(c,d),y=f.default.createElement(w,{key:"r_"+g,shouldUpdate:!!m,render:this.props.renderRow.bind(null,s.getRowData(c,d),i,h,this.onRowHighlighted)});if(k.push(y),this.props.renderSeparator&&(d!==u.length-1||c===a.length-1)){var v=this.state.highlightedRow.sectionID===i&&(this.state.highlightedRow.rowID===h||this.state.highlightedRow.rowID===u[d+1]),S=this.props.renderSeparator(i,h,v);S&&k.push(S)}if(++o===this.state.curRenderedRowsCount)break}var b=f.default.cloneElement(this.props.renderSectionBodyWrapper(i),{className:this.props.sectionBodyClassName},k);if(this.props.renderSectionWrapper?t.push(f.default.cloneElement(this.props.renderSectionWrapper(i),{},l,b)):(t.push(l),t.push(b)),o>=this.state.curRenderedRowsCount)break}}var _=this.props,R=_.renderScrollComponent,C=p()(_,["renderScrollComponent"]);return f.default.cloneElement(R(e()({},C,{onScroll:this._onScroll})),{ref:function(s){return n.ListViewRef=s},onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout},this.props.renderHeader?this.props.renderHeader():null,f.default.cloneElement(C.renderBodyComponent(),{},t),this.props.renderFooter?this.props.renderFooter():null,C.children)}}]),s}(f.default.Component);S.DataSource=y.a,S.propTypes=e()({},v.a.propTypes,{dataSource:m.a.instanceOf(y.a).isRequired,renderSeparator:m.a.func,renderRow:m.a.func.isRequired,initialListSize:m.a.number,onEndReached:m.a.func,onEndReachedThreshold:m.a.number,pageSize:m.a.number,renderFooter:m.a.func,renderHeader:m.a.func,renderSectionHeader:m.a.func,renderScrollComponent:m.a.func,scrollRenderAheadDistance:m.a.number,onChangeVisibleRows:m.a.func,scrollEventThrottle:m.a.number,renderBodyComponent:m.a.func,renderSectionWrapper:m.a.func,renderSectionBodyWrapper:m.a.func,sectionBodyClassName:m.a.string,listViewPrefixCls:m.a.string,useBodyScroll:m.a.bool}),S.defaultProps={initialListSize:10,pageSize:1,renderScrollComponent:function(n){return f.default.createElement(v.a,n)},renderBodyComponent:function(){return f.default.createElement("div",null)},renderSectionBodyWrapper:function(n){return f.default.createElement("div",{key:n})},sectionBodyClassName:"list-view-section-body",listViewPrefixCls:"rmc-list-view",scrollRenderAheadDistance:1e3,onEndReachedThreshold:1e3,scrollEventThrottle:50,scrollerOptions:{}};var b=function(){var n=this;this.state={curRenderedRowsCount:this.props.initialListSize,highlightedRow:{}},this.getMetrics=function(){return{contentLength:n.scrollProperties.contentLength,totalRows:n.props.dataSource.getRowCount(),renderedRows:n.state.curRenderedRowsCount,visibleRows:Object.keys(n._visibleRows).length}},this.getInnerViewNode=function(){return n.ListViewRef.getInnerViewNode()},this.scrollTo=function(){var s;n.ListViewRef&&n.ListViewRef.scrollTo&&(s=n.ListViewRef).scrollTo.apply(s,arguments)},this.onRowHighlighted=function(s,a){n.setState({highlightedRow:{sectionID:s,rowID:a}})},this._onContentSizeChange=function(s,a){var t=n.props.horizontal?s:a;t!==n.scrollProperties.contentLength&&(n.scrollProperties.contentLength=t,n._renderMoreRowsIfNeeded()),n.props.onContentSizeChange&&n.props.onContentSizeChange(s,a)},this._onLayout=function(s){var a=s.nativeEvent.layout,t=a.width,e=a.height,o=n.props.horizontal?t:e;o!==n.scrollProperties.visibleLength&&(n.scrollProperties.visibleLength=o,n._renderMoreRowsIfNeeded()),n.props.onLayout&&n.props.onLayout(s)},this._maybeCallOnEndReached=function(s){return!!(n.props.onEndReached&&n.scrollProperties.contentLength!==n._sentEndForContentLength&&n._getDistanceFromEnd(n.scrollProperties)<n.props.onEndReachedThreshold&&n.state.curRenderedRowsCount===n.props.dataSource.getRowCount())&&(n._sentEndForContentLength=n.scrollProperties.contentLength,n.props.onEndReached(s),!0)},this._renderMoreRowsIfNeeded=function(){if(null===n.scrollProperties.contentLength||null===n.scrollProperties.visibleLength||n.state.curRenderedRowsCount===n.props.dataSource.getRowCount())return void n._maybeCallOnEndReached();n._getDistanceFromEnd(n.scrollProperties)<n.props.scrollRenderAheadDistance&&n._pageInNewRows()},this._pageInNewRows=function(){n.setState(function(s,a){var t=Math.min(s.curRenderedRowsCount+a.pageSize,a.dataSource.getRowCount());return n._prevRenderedRowsCount=s.curRenderedRowsCount,{curRenderedRowsCount:t}},function(){n._prevRenderedRowsCount=n.state.curRenderedRowsCount})},this._getDistanceFromEnd=function(n){return n.contentLength-n.visibleLength-n.offset},this._onScroll=function(s,a){n.ListViewRef&&(n.scrollProperties=a,n._maybeCallOnEndReached(s)||n._renderMoreRowsIfNeeded(),n.props.onEndReached&&n._getDistanceFromEnd(n.scrollProperties)>n.props.onEndReachedThreshold&&(n._sentEndForContentLength=null),n.props.onScroll&&n.props.onScroll(s))}};s.a=S},905:function(n,s,a){"use strict";function t(n){var s=0;do{isNaN(n.offsetTop)||(s+=n.offsetTop)}while(n=n.offsetParent);return s}function e(n){return n.touches&&n.touches.length?n.touches[0]:n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n}function o(n,s){var a=!0,t=!0;return function(e){a&&(a=!1,setTimeout(function(){a=!0,n(e)},s),t&&(n(e),t=!1))}}s.b=t,s.a=e,s.c=o},906:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function e(n,s){var a=n.renderHeader,t=n.renderFooter,e=n.renderSectionHeader,o=n.renderBodyComponent,c=u(n,["renderHeader","renderFooter","renderSectionHeader","renderBodyComponent"]),i=n.listPrefixCls,r={renderHeader:null,renderFooter:null,renderSectionHeader:null,renderBodyComponent:o||function(){return p.default.createElement("div",{className:i+"-body"})}};return a&&(r.renderHeader=function(){return p.default.createElement("div",{className:i+"-header"},a())}),t&&(r.renderFooter=function(){return p.default.createElement("div",{className:i+"-footer"},t())}),e&&(r.renderSectionHeader=s?function(n,s){return p.default.createElement("div",null,p.default.createElement(l,{prefixCls:i},e(n,s)))}:function(n,s){return p.default.createElement(l,{prefixCls:i},e(n,s))}),{restProps:c,extraProps:r}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=e;var o=a(0),p=t(o),c=a(232),i=t(c),u=function(n,s){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&s.indexOf(t)<0&&(a[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,t=Object.getOwnPropertySymbols(n);e<t.length;e++)s.indexOf(t[e])<0&&(a[t[e]]=n[t[e]]);return a},l=i.default.Item;n.exports=s.default},954:function(n,s){},955:function(n,s,a){"use strict";function t(n,s,a){return n[s][a]}function e(n,s){return n[s]}function o(n){for(var s=0,a=0;a<n.length;a++){s+=n[a].length}return s}function p(n){if(h()(n))return{};for(var s={},a=0;a<n.length;a++){var t=n[a];g()(!s[t],"Value appears more than once in array: "+t),s[t]=!0}return s}var c=a(5),i=a.n(c),u=a(12),l=a.n(u),r=a(248),k=a.n(r),d=a(956),h=a.n(d),f=a(23),g=a.n(f),m=function(){function n(s){i()(this,n),k()(s&&"function"==typeof s.rowHasChanged,"Must provide a rowHasChanged function."),this._rowHasChanged=s.rowHasChanged,this._getRowData=s.getRowData||t,this._sectionHeaderHasChanged=s.sectionHeaderHasChanged,this._getSectionHeaderData=s.getSectionHeaderData||e,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return l()(n,[{key:"cloneWithRows",value:function(n,s){var a=s?[s]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:n},["s1"],a)}},{key:"cloneWithRowsAndSections",value:function(s,a,t){k()("function"==typeof this._sectionHeaderHasChanged,"Must provide a sectionHeaderHasChanged function with section data."),k()(!a||!t||a.length===t.length,"row and section ids lengths must be the same");var e=new n({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return e._dataBlob=s,e.sectionIdentities=a||Object.keys(s),t?e.rowIdentities=t:(e.rowIdentities=[],e.sectionIdentities.forEach(function(n){e.rowIdentities.push(Object.keys(s[n]))})),e._cachedRowCount=o(e.rowIdentities),e._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),e}},{key:"getRowCount",value:function(){return this._cachedRowCount}},{key:"getRowAndSectionCount",value:function(){return this._cachedRowCount+this.sectionIdentities.length}},{key:"rowShouldUpdate",value:function(n,s){var a=this._dirtyRows[n][s];return g()(void 0!==a,"missing dirtyBit for section, row: "+n+", "+s),a}},{key:"getRowData",value:function(n,s){var a=this.sectionIdentities[n],t=this.rowIdentities[n][s];return g()(void 0!==a&&void 0!==t,"rendering invalid section, row: "+n+", "+s),this._getRowData(this._dataBlob,a,t)}},{key:"getRowIDForFlatIndex",value:function(n){for(var s=n,a=0;a<this.sectionIdentities.length;a++){if(!(s>=this.rowIdentities[a].length))return this.rowIdentities[a][s];s-=this.rowIdentities[a].length}return null}},{key:"getSectionIDForFlatIndex",value:function(n){for(var s=n,a=0;a<this.sectionIdentities.length;a++){if(!(s>=this.rowIdentities[a].length))return this.sectionIdentities[a];s-=this.rowIdentities[a].length}return null}},{key:"getSectionLengths",value:function(){for(var n=[],s=0;s<this.sectionIdentities.length;s++)n.push(this.rowIdentities[s].length);return n}},{key:"sectionHeaderShouldUpdate",value:function(n){var s=this._dirtySections[n];return g()(void 0!==s,"missing dirtyBit for section: "+n),s}},{key:"getSectionHeaderData",value:function(n){if(!this._getSectionHeaderData)return null;var s=this.sectionIdentities[n];return g()(void 0!==s,"renderSection called on invalid section: "+n),this._getSectionHeaderData(this._dataBlob,s)}},{key:"_calculateDirtyArrays",value:function(n,s,a){for(var t=p(s),e={},o=0;o<a.length;o++){var c=s[o];g()(!e[c],"SectionID appears more than once: "+c),e[c]=p(a[o])}this._dirtySections=[],this._dirtyRows=[];for(var i,u=0;u<this.sectionIdentities.length;u++){var c=this.sectionIdentities[u];i=!t[c];var l=this._sectionHeaderHasChanged;!i&&l&&(i=l(this._getSectionHeaderData(n,c),this._getSectionHeaderData(this._dataBlob,c))),this._dirtySections.push(!!i),this._dirtyRows[u]=[];for(var r=0;r<this.rowIdentities[u].length;r++){var k=this.rowIdentities[u][r];i=!t[c]||!e[c][k]||this._rowHasChanged(this._getRowData(n,c,k),this._getRowData(this._dataBlob,c,k)),this._dirtyRows[u].push(!!i)}}}}]),n}();s.a=m},956:function(n,s,a){"use strict";function t(n){if(Array.isArray(n))return 0===n.length;if("object"==typeof n){if(n){e(n)&&void 0!==n.size&&o(!1);for(var s in n)return!1}return!0}return!n}function e(n){return"undefined"!=typeof Symbol&&n[Symbol.iterator]}var o=a(248);n.exports=t},957:function(n,s,a){"use strict";var t=a(4),e=a.n(t),o=a(5),p=a.n(o),c=a(12),i=a.n(c),u=a(9),l=a.n(u),r=a(10),k=a.n(r),d=a(0),h=a(2),f=a.n(h),g=a(6),m=a.n(g),y=a(905),v={className:f.a.string,prefixCls:f.a.string,listPrefixCls:f.a.string,listViewPrefixCls:f.a.string,style:f.a.object,contentContainerStyle:f.a.object,onScroll:f.a.func},w=function(n){function s(){var n,a,t,e;p()(this,s);for(var o=arguments.length,c=Array(o),i=0;i<o;i++)c[i]=arguments[i];return a=t=l()(this,(n=s.__proto__||Object.getPrototypeOf(s)).call.apply(n,[this].concat(c))),S.call(t),e=a,l()(t,e)}return k()(s,n),i()(s,[{key:"componentWillUpdate",value:function(n){this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||!this.handleScroll||(this.props.useBodyScroll?window.removeEventListener("scroll",this.handleScroll):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll))}},{key:"componentDidUpdate",value:function(n){var s=this;this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||!this.handleScroll||setTimeout(function(){s.props.useBodyScroll?window.addEventListener("scroll",s.handleScroll):s.ScrollViewRef.addEventListener("scroll",s.handleScroll)},0)}},{key:"componentDidMount",value:function(){var n=this,s=function(s){return n.props.onScroll&&n.props.onScroll(s,n.getMetrics())};this.props.scrollEventThrottle&&(s=Object(y.c)(s,this.props.scrollEventThrottle)),this.handleScroll=s,this.onLayout=function(){return n.props.onLayout({nativeEvent:{layout:{width:window.innerWidth,height:window.innerHeight}}})},this.props.useBodyScroll?(window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onLayout)):this.ScrollViewRef.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.useBodyScroll?(window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.onLayout)):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var n=this,s=this.props,a=s.children,t=s.className,o=s.prefixCls,p=s.listPrefixCls,c=s.listViewPrefixCls,i=s.style,u=void 0===i?{}:i,l=s.contentContainerStyle,r=void 0===l?{}:l,k=s.useBodyScroll,h=s.pullToRefresh,f={position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch",flex:1},g=o||c||"",y={ref:function(s){return n.ScrollViewRef=s},style:e()({},k?{}:f,u),className:m()(t,g+"-scrollview")},v={ref:function(s){return n.InnerScrollViewRef=s},style:e()({position:"absolute",minWidth:"100%"},r),className:m()(g+"-scrollview-content",p)},w=function(s){return d.default.cloneElement(h,{getScrollContainer:s?function(){return document.body}:function(){return n.ScrollViewRef}},a)};return k?h?d.default.createElement("div",y,w(!0)):d.default.createElement("div",y,a):h?d.default.createElement("div",y,d.default.createElement("div",v,w())):d.default.createElement("div",y,d.default.createElement("div",v,a))}}]),s}(d.default.Component);w.propTypes=v;var S=function(){var n=this;this.getMetrics=function(){var s=!n.props.horizontal;if(n.props.useBodyScroll){var a=document.scrollingElement?document.scrollingElement:document.body;return{visibleLength:window[s?"innerHeight":"innerWidth"],contentLength:n.ScrollViewRef?n.ScrollViewRef[s?"scrollHeight":"scrollWidth"]:0,offset:a[s?"scrollTop":"scrollLeft"]}}return{visibleLength:n.ScrollViewRef[s?"offsetHeight":"offsetWidth"],contentLength:n.ScrollViewRef[s?"scrollHeight":"scrollWidth"],offset:n.ScrollViewRef[s?"scrollTop":"scrollLeft"]}},this.getInnerViewNode=function(){return n.InnerScrollViewRef},this.scrollTo=function(){if(n.props.useBodyScroll){var s;(s=window).scrollTo.apply(s,arguments)}else n.ScrollViewRef.scrollLeft=arguments.length<=0?void 0:arguments[0],n.ScrollViewRef.scrollTop=arguments.length<=1?void 0:arguments[1]}};s.a=w},958:function(n,s,a){"use strict";function t(n){window.document.body.scrollTop=n,window.document.documentElement.scrollTop=n}var e=a(55),o=a.n(e),p=a(4),c=a.n(p),i=a(770),u=a.n(i),l=a(5),r=a.n(l),k=a(12),d=a.n(k),h=a(9),f=a.n(h),g=a(10),m=a.n(g),y=a(0),v=a(2),w=a.n(v),S=a(0),b=a(6),_=a.n(b),R=a(904),C=a(905),E=function(n){function s(n){r()(this,s);var a=f()(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return x.call(a),a.state={pageSize:n.pageSize,_delay:!1},a}return m()(s,n),d()(s,[{key:"componentDidMount",value:function(){this.dataChange(this.props),this.getQsInfo()}},{key:"componentWillReceiveProps",value:function(n){this.props.dataSource!==n.dataSource&&this.dataChange(n)}},{key:"componentDidUpdate",value:function(){this.getQsInfo()}},{key:"componentWillUnmount",value:function(){this._timer&&clearTimeout(this._timer),this._hCache=null}},{key:"renderQuickSearchBar",value:function(n,s){var a=this,t=this.props,e=t.dataSource,o=t.prefixCls,p=e.sectionIdentities.map(function(n){return{value:n,label:e._getSectionHeaderData(e._dataBlob,n)}});return y.default.createElement("ul",{ref:function(n){return a.quickSearchBarRef=n},className:o+"-quick-search-bar",style:s,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd},y.default.createElement("li",{"data-qf-target":n.value,onClick:function(){return a.onQuickSearchTop(void 0,n.value)}},n.label),p.map(function(n){return y.default.createElement("li",{key:n.value,"data-qf-target":n.value,onClick:function(){return a.onQuickSearch(n.value)}},n.label)}))}},{key:"render",value:function(){var n,s=this,a=this.state,t=a._delay,e=a.pageSize,p=this.props,i=p.className,l=p.prefixCls,r=p.children,k=p.quickSearchBarTop,d=p.quickSearchBarStyle,h=p.initialListSize,f=void 0===h?Math.min(20,this.props.dataSource.getRowCount()):h,g=p.showQuickSearchIndicator,m=p.renderSectionHeader,v=p.sectionHeaderClassName,w=u()(p,["className","prefixCls","children","quickSearchBarTop","quickSearchBarStyle","initialListSize","showQuickSearchIndicator","renderSectionHeader","sectionHeaderClassName"]);return y.default.createElement("div",{className:l+"-container"},t&&this.props.delayActivityIndicator,y.default.createElement(R.a,c()({},w,{ref:function(n){return s.indexedListViewRef=n},className:_()(l,i),initialListSize:f,pageSize:e,renderSectionHeader:function(n,a){return y.default.cloneElement(m(n,a),{ref:function(n){return s.sectionComponents[a]=n},className:v||l+"-section-header"})}}),r),this.renderQuickSearchBar(k,d),g?y.default.createElement("div",{className:_()((n={},o()(n,l+"-qsindicator",!0),o()(n,l+"-qsindicator-hide",!g||!this.state.showQuickSearchIndicator),n)),ref:function(n){return s.qsIndicatorRef=n}}):null)}}]),s}(y.default.Component);E.propTypes=c()({},R.a.propTypes,{children:w.a.any,prefixCls:w.a.string,className:w.a.string,sectionHeaderClassName:w.a.string,quickSearchBarTop:w.a.object,quickSearchBarStyle:w.a.object,onQuickSearch:w.a.func,showQuickSearchIndicator:w.a.bool}),E.defaultProps={prefixCls:"rmc-indexed-list",quickSearchBarTop:{value:"#",label:"#"},onQuickSearch:function(){},showQuickSearchIndicator:!1,delayTime:100,delayActivityIndicator:""};var x=function(){var n=this;this.onQuickSearchTop=function(s,a){n.props.useBodyScroll?t(0):S.default.findDOMNode(n.indexedListViewRef.ListViewRef).scrollTop=0,n.props.onQuickSearch(s,a)},this.onQuickSearch=function(s){var a=S.default.findDOMNode(n.indexedListViewRef.ListViewRef),e=S.default.findDOMNode(n.sectionComponents[s]);n.props.useBodyScroll?t(e.getBoundingClientRect().top-a.getBoundingClientRect().top+Object(C.b)(a)):a.scrollTop+=e.getBoundingClientRect().top-a.getBoundingClientRect().top,n.props.onQuickSearch(s)},this.onTouchStart=function(s){n._target=s.target,n._basePos=n.quickSearchBarRef.getBoundingClientRect(),document.addEventListener("touchmove",n._disableParent,!1),document.body.className=document.body.className+" "+n.props.prefixCls+"-qsb-moving",n.updateIndicator(n._target)},this.onTouchMove=function(s){if(s.preventDefault(),n._target){var a=Object(C.a)(s),t=n._basePos,e=void 0;if(a.clientY>=t.top&&a.clientY<=t.top+n._qsHeight){e=Math.floor((a.clientY-t.top)/n._avgH);var o=void 0;if(e in n._hCache&&(o=n._hCache[e][0]),o){var p=o.getAttribute("data-qf-target");n._target!==o&&(n.props.quickSearchBarTop.value===p?n.onQuickSearchTop(void 0,p):n.onQuickSearch(p),n.updateIndicator(o)),n._target=o}}}},this.onTouchEnd=function(){n._target&&(document.removeEventListener("touchmove",n._disableParent,!1),document.body.className=document.body.className.replace(new RegExp("\\s*"+n.props.prefixCls+"-qsb-moving","g"),""),n.updateIndicator(n._target,!0),n._target=null)},this.getQsInfo=function(){var s=n.quickSearchBarRef,a=s.offsetHeight,t=[];[].slice.call(s.querySelectorAll("[data-qf-target]")).forEach(function(n){t.push([n])});for(var e=a/t.length,o=0,p=0,c=t.length;p<c;p++)o=p*e,t[p][1]=[o,o+e];n._qsHeight=a,n._avgH=e,n._hCache=t},this.sectionComponents={},this.dataChange=function(s){var a=s.dataSource.getRowCount();a&&(n.setState({_delay:!0}),n._timer&&clearTimeout(n._timer),n._timer=setTimeout(function(){n.setState({pageSize:a,_delay:!1},function(){return n.indexedListViewRef._pageInNewRows()})},s.delayTime))},this.updateIndicator=function(s,a){var t=s;t.getAttribute("data-qf-target")||(t=t.parentNode),n.props.showQuickSearchIndicator&&(n.qsIndicatorRef.innerText=t.innerText.trim(),n.setState({showQuickSearchIndicator:!0}),n._indicatorTimer&&clearTimeout(n._indicatorTimer),n._indicatorTimer=setTimeout(function(){n.setState({showQuickSearchIndicator:!1})},1e3));var e=n.props.prefixCls+"-quick-search-bar-over";n._hCache.forEach(function(n){n[0].className=n[0].className.replace(e,"")}),a||(t.className=t.className+" "+e)},this._disableParent=function(n){n.preventDefault(),n.stopPropagation()}};s.a=E},959:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function e(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function o(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function p(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var c=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n},i=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),u=a(0),l=t(u),r=a(903),k=t(r),d=a(906),h=t(d),f=k.default.IndexedList,g=function(n){function s(){return e(this,s),o(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return p(s,n),i(s,[{key:"render",value:function(){var n=this,s=this.props,a=s.prefixCls,t=s.listPrefixCls,e=(0,h.default)(this.props,!0),o=e.restProps,p=e.extraProps;return l.default.createElement(f,c({ref:function(s){return n.indexedListRef=s},sectionHeaderClassName:a+"-section-header "+t+"-body",sectionBodyClassName:a+"-section-body "+t+"-body"},o,p),this.props.children)}}]),s}(l.default.Component);s.default=g,g.defaultProps={prefixCls:"am-indexed-list",listPrefixCls:"am-list",listViewPrefixCls:"am-list-view"},n.exports=s.default},998:function(n,s,a){"use strict";a(45),a(81),a(1131)},999:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function e(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function o(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function p(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var c=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n},i=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),u=a(0),l=t(u),r=a(1132),k=t(r),d=a(82),h=t(d),f=function(n){function s(){return e(this,s),o(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return p(s,n),i(s,[{key:"render",value:function(){var n=c({activate:"\u677e\u5f00\u7acb\u5373\u5237\u65b0",deactivate:"\u4e0b\u62c9\u53ef\u4ee5\u5237\u65b0",release:l.default.createElement(h.default,{type:"loading"}),finish:"\u5b8c\u6210\u5237\u65b0"},this.props.indicator);return l.default.createElement(k.default,c({},this.props,{indicator:n}))}}]),s}(l.default.Component);s.default=f,f.defaultProps={prefixCls:"am-pull-to-refresh"},n.exports=s.default}});